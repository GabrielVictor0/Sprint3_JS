<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        const url = "https://viacep.com.br/ws/01001000/json/";

        //pending: estado inicial, nem cumprido nem rejeitado
        //fulfilled: significa que a operação foi concluida com sucesso
        //rejected: significa que a operação falhou

        //get - chamada em uma API - função assincrona
        // fetch(url)
        // .then((resposta)=>{
        //     //objeto promise resolvido (headers, body, others)
        //     return resposta.json();//pega a resposta no formato json para jogar no próximo .then
        // })
        // .then((dados)=>{//função de callback para retornar os dados adquiridos do corpo da requisição
        //     console.log(`
        //         Endereco: ${dados.logradouro}
        //         Cidade: ${dados.localidade}
        //         Estado: ${dados.uf}
        //     `);
        // })
        // .catch((e)=>{//caso a chamada na API de error, a requisição vai cair no .catch e retornar o erro
        //     console.log(`Deu ruim: ${e.TypeError}`)
        //     console.log(e);
        // });

        //await é utilizado dentro de uma função async para esperar por uma promise(basicamente está aguardando a resposta da requisição)
        async function chamarApi(endereco) { //função async é utilizado para casos de funções assincronas(devolve uma promise)
            try {
                const promise = await fetch(endereco); //realizando requisição
                const dados = await promise.json();// utilizando await para aguardar a resposta da requisição, e retornando a resposta como json
                console.log(dados);//retornando valor obtido da promise no formato json 
            } catch (error) { //tratamento de erro na requisição
                console.log("Deu ruim na API");
            }
           
        }

        //chamando função async(requisição)
        chamarApi(url); //url é o objeto endereço que serve como parametro para a requisição







    // const retorno = fetch('https://viacep.com.br/ws/01001000/json/')
    //     .then((resp)=>{//promise resolvida
    //         console.log(resp);//objeto cheio de coisas
    //         return resp.json();//retorna os dados
    //     })
    //     .then((dados)=>{//os dados do corpo da promise the object
    //         console.log(dados);
    //     })
    //     .catch((e)=>{
    //         console.log("Deu ruiiim!");
    //     })
    </script>
</body>
</html>
